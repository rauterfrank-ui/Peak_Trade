[mypy]
python_version = 3.11

# Tolerant start (dev-only gate)
warn_return_any = False
warn_unused_ignores = True
ignore_missing_imports = True
follow_imports = silent
strict_optional = False
disable_error_code = import-untyped

# Keep this gate fast + focused initially (avoid legacy churn).
# We still run `mypy src tests`, but exclude most of the repo for now.
# NOTE: Keep this regex on a single line (ini parsing + mypy regex handling).
# IMPORTANT: This regex is written to exclude *files* (ends with .py/.pyi) so that mypy can still
# traverse directories like src/ and tests/ without concluding they contain "no .py files".
exclude = (^|.*/)(build/.*\.pyi?$|dist/.*\.pyi?$|\.tmp_[^/]+/.*\.pyi?$|\.tmp_optional_deps_gate/.*\.pyi?$|\.tmp_pyright_venv/.*\.pyi?$|src/(?!exchange/|data/).*\.pyi?$|src/exchange/(?!protocols\.py$|ccxt_client\.py$).*\.pyi?$|src/data/(?!backend\.py$|providers/|record_replay/).*\.pyi?$|tests/(?!exchange/|data/).*\.pyi?$|tests/exchange/(?!test_ccxt_shims_importability\.py$).*\.pyi?$|tests/data/(?!test_optional_deps_imports\.py$|test_backend_registry_lazy_import\.py$|test_kraken_ccxt_backend\.py$|test_ohlcv_record_replay\.py$).*\.pyi?$|src/exchange/__init__\.py$)
